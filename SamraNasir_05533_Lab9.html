<!doctype html>
<html>
   <head>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js"></script>
   </head>
   <body onload="weather()">
      <div ng-app="mainApp" ng-controller="mainController">
         <table cellpadding="10" style="text-align:center;">
            <tr style="font-weight:bold;"><td colspan="7">{{cal.month}}<td></tr>
            <tr style="font-weight:bold;">
               <td>Sun</td>
               <td>Mon</td>
               <td>Tue</td>
               <td>Wed</td>
               <td>Thu</td>
               <td>Fri</td>
               <td>Sat</td>
            </tr>
            <tr><td data-ng-repeat = "x in array1">{{x}}</td></tr>
            <tr><td data-ng-repeat = "x in array2">{{x}}</td></tr>
            <tr><td data-ng-repeat = "x in array3">{{x}}</td></tr>
            <tr><td data-ng-repeat = "x in array4">{{x}}</td></tr>
            <tr><td data-ng-repeat = "x in array5">{{x}}</td></tr>
            <tr><td data-ng-repeat = "x in array6">{{x}}</td></tr>

         </table>
      </div>


   <script>

   var mainApp = angular.module("mainApp", []);

   mainApp.controller('mainController', function($scope) {

      var calendar_months = ["January","Feburary","March","April","May","June","July","August","September","October","November","December"];
      var calendar_dates = [31,28,31,30,31,30,31,31,30,31,30,31];
      var date = new Date();
      var curMonth = date.getMonth();
      var curYear = date.getFullYear();
      var startDay = new Date(curYear, curMonth,1).getDay();
      var i = 0;
      var x = 0;
      var day = 1;

      $scope.cal = {

         month: calendar_months[curMonth] + " " + curYear,

      };

      $scope.array1 = [];
      $scope.array2 = [];
      $scope.array3 = [];
      $scope.array4 = [];
      $scope.array5 = [];
      $scope.array6 = [];

      var a = calendar_dates[curMonth-1] - startDay + 1;
      for(var y=0;y<6;y++){
      	x=0;
      	if(y==0){
      		array = $scope.array1;
  	  		for(i=0;i<startDay;i++){
  				array.push(a);
  				a++;
  				x++;
  			}

  			while(x<7){
  				array.push(day);
  				day++;
  				x++;
  			}
  	  	}


  	  	else{
  	  		if(y==1)
  	  			array = $scope.array2;
  	  		else if(y==2)
  	  			array = $scope.array3;
  	  		else if(y==3)
  	  			array = $scope.array4;
  	  		else if(y==4)
  	  			array = $scope.array5;
  	  		else if(y==5)
  	  			array = $scope.array6;

  	  		while(x<7 && day<=calendar_dates[curMonth]){
  	  			array.push(day);
  				day++;
  				x++;
  			}

  			if(day>calendar_dates[curMonth]){
  				var b = 1 ;
  				while(x<7){
  					array.push(b);
  					x++;
  					b++;
  				}
  				y=7;
  			}
  	  	}
  	  }

   });

function weather(){

  var xmlhttp = new XMLHttpRequest();
  var url = "https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places(1)%20where%20text%3D%22islamabad%22)&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";
  xmlhttp.onreadystatechange=function() {

      //calling display function once resource file is found and loaded   
      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          parseJSON(xmlhttp.responseText);
      }
      else{console.log("");}
  }
  xmlhttp.open("GET", url, true);
  xmlhttp.send();

}


function parseJSON(response) {
 
    var arr = JSON.parse(response);

    var description = arr["query"].results.channel.item.condition.temp;
    console.log(description);

}



   </script>

   </body>
</html>